# 总主页功能说明

## 功能概述

程序在批量生成所有训练后，会自动生成一个总主页 `output/index.html`，提供所有训练的导航入口。

## 主要特性

### 📊 统计信息
- 显示训练批次总数
- 显示篇章总数（所有训练合计）

### 🗂️ 训练列表
每个训练显示为一个卡片，包含：
- **年份和季节**：如 "2025年秋季"
- **训练标题**：从生成的 index.html 中自动提取
- **篇章数量**：统计该训练包含的篇章数

### 🎨 界面设计
- 现代化渐变背景
- 响应式网格布局（自动适配不同屏幕）
- 卡片式设计，悬浮时有动画效果
- 移动端友好

### 🔗 导航链接
点击任意训练卡片，可直接跳转到该训练的主页

## 自动排序

训练按以下规则排序（最新的在前）：
1. 优先按年份降序
2. 同年份内按季节排序：冬季 > 秋季 > 夏季 > 春季

## 生成时机

总主页在以下情况自动生成：
- ✅ 批量处理模式完成后
- ✅ 至少有一个批次成功生成
- ✅ 包含已跳过但存在的批次（`skip_existing: true` 时）

## 文件位置

```
output/
├── index.html          ← 总主页（新增）
├── 2025-秋季/
│   └── index.html      ← 秋季训练主页
├── 2025-夏季/
│   └── index.html      ← 夏季训练主页
└── ...
```

## 使用方法

1. **生成所有训练**
   ```bash
   python main.py
   ```

2. **打开总主页**
   - 直接打开 `output/index.html`
   - 或运行后查看提示信息

3. **浏览训练**
   - 点击任意训练卡片进入该训练
   - 在各训练页面间自由切换

## 技术实现

- **模板**：`src/templates/main_index.html`
- **生成函数**：`main.py` 中的 `generate_main_index()`
- **数据收集**：自动从文件系统和生成的 HTML 中提取信息

## 配置说明

无需额外配置，总主页会根据以下信息自动生成：
- 文件夹名称（年份-季节）
- 生成的章节文件数量
- 各训练的 index.html 标题

## 示例效果

```
╔══════════════════════════════════════════════╗
║      🏠 主恢复训练合集                        ║
║   Lord's Recovery Training Collections      ║
╠══════════════════════════════════════════════╣
║                                              ║
║   📊 统计：2 个训练批次 | 21 篇总章节        ║
║                                              ║
║  ┌──────────────────┐  ┌──────────────────┐ ║
║  │  2025年秋季      │  │  2025年夏季      │ ║
║  │  国际长老及负...  │  │  夏季训练        │ ║
║  │  📖 共 9 篇 →    │  │  📖 共 12 篇 →   │ ║
║  └──────────────────┘  └──────────────────┘ ║
║                                              ║
║  生成时间: 2025年12月14日 08:34             ║
╚══════════════════════════════════════════════╝
```

## 后续优化建议

1. ✅ 已实现基础功能
2. 🔄 可考虑添加搜索功能
3. 🔄 可添加训练详细信息预览
4. 🔄 可添加收藏/标记功能
