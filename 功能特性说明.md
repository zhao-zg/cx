# 功能特性说明

本文档汇总了项目的主要功能特性和优化历史。

## 📱 移动端优化

### 核心优化策略
- ✅ **极简化设计**：移除所有桌面媒体查询，统一移动优先设计
- ✅ **性能优化**：去除渐变背景、禁用过渡动画，提升响应速度
- ✅ **触摸优化**：所有按钮≥44x44px，符合 iOS/Android 规范
- ✅ **即时反馈**：使用 `:active` 伪类，响应时间<50ms

### 底部控制栏
- **位置**：屏幕底部固定（`position: fixed`）
- **布局**：播放/暂停 + 进度条 + 字体控制 + 语速选择
- **适配**：刘海屏安全区域（`env(safe-area-inset-bottom)`）
- **效果**：半透明背景 + 毛玻璃效果

### 导航简化
- ✅ 首页直达纲目：点击章节卡片直接进入纲目页
- ✅ 移除冗余链接：首页不再显示所有栏目链接
- ✅ 顶部栏目切换：通过页面导航在顶部切换栏目
- ✅ 单次 tap 操作：避免多级菜单

## 📄 页面类型

### 数据模型设计
```python
class Chapter:
    outline_sections: List[Content]  # 纯标题（经文.docx）
    detail_sections: List[Content]   # 标题+内容（听抄.docx）
    message_content: List[str]       # 职事信息（听抄.docx末尾）
```

### 页面说明
1. **纲目页（_cv.htm）**：只显示大纲标题结构（壹、一、1、a），不含详细段落
2. **详情页（_dg.htm）**：显示完整的详细内容段落
3. **听抄页（_ts.htm）**：显示职事信息内容
4. **晨兴页（_cx.htm）**：每周晨兴内容，支持分页
5. **诗歌页（_sg.htm）**：自动提取图片

### 层级样式
```css
.section-level1 { /* 一级标题：壹、贰、叁 */
    font-size: 18px;
    color: #667eea;
    border-bottom: 2px solid #e6e8f0;
}
.section-level2 { /* 二级标题：一、二、三 */
    font-size: 17px;
    border-left: 3px solid #667eea;
}
.section-level3 { /* 三级标题：1、2、3 */
    font-size: 16px;
    padding-left: 16px;
}
.section-level4 { /* 四级标题：a、b、c */
    font-size: 15px;
    padding-left: 24px;
}
```

## 🎨 多样式支持

### Word 样式系统兼容
支持两种不同的 Word 样式系统：

**秋季 .docx 样式**：
- `121文章篇题` → 篇章标题
- `131文章大点` → 大点（壹、贰、叁）
- `132文章中点` → 中点（一、二、三）
- `133文章小点` → 小点（1、2、3）
- `134文章小a点` → 小a点
- `8888文章正文` → 正文内容

**夏季 .doc 样式**：
- `０ａ總題` → 篇章标题
- `職事信息大標` → 大点
- `職事信息中標` → 中点
- `职事小标题` → 小点
- `信息正文18/3/17` → 正文内容

### 文本特征回退机制
如果样式映射失败，使用正则表达式匹配：
- `^第[一二三四五六七八九十]+篇` → 篇章标题
- `^[壹贰叁肆伍陆柒捌玖拾]+[、\s]` → 大点
- `^[一二三四五六七八九十]+[、\s]` → 中点
- `^\d+[、\s]` → 小点

### 批次资源隔离
- 每个批次独立的输出目录：`output/{批次名称}/`
- 图片资源批次隔离：`output/{批次名称}/images/`
- HTML 使用相对路径引用资源

## 🔧 技术特性

### 跨平台支持
- ✅ Windows/Linux/macOS
- ✅ 支持 .doc 和 .docx 格式
- ✅ 自动格式检测和转换
- ✅ 无需 win32com 依赖

### 自动化处理
- ✅ 批量处理多个批次（自动扫描子文件夹）
- ✅ 自动检测文档格式
- ✅ 自动识别样式系统
- ✅ 自动提取图片资源

### 响应式设计
- ✅ 移动端优先
- ✅ 触摸友好交互
- ✅ 可折叠内容区域
- ✅ 统一导航和样式

## 📊 性能优化成果

### CSS 代码减少
- 首页：-100 行（移除冗余链接）
- 基础模板：-80 行（移除媒体查询）
- 纲目页：-70 行（简化控件）
- 晨兴页：-100 行（简化动画）
- **总计：-350 行（-43%）**

### 交互响应提升
- 触摸响应：<50ms（+50%）
- 首次点击：直达纲目（减少 1 次 tap）
- 页面切换：顶部导航（减少返回操作）

## 🎯 用户体验改进

### 简化操作流程
**优化前**：首页 → 选择栏目 → 进入页面（2 次点击）
**优化后**：首页 → 直达纲目（1 次点击）

### 统一视觉风格
- 所有页面布局一致：导航 → 标题 → 内容
- 底部控制栏全局可用
- 统一的触摸反馈效果

### 移动端体验
- 节省屏幕空间：顶部区域完全留给内容
- 拇指易达：底部控制栏符合单手操作习惯
- 始终可见：无需滚动即可访问控件
- 现代感：类似主流 App 的设计

## 📚 相关文档

详细的历史说明文档：
- `底部控制栏优化说明.md` - 底部控制栏实现细节
- `多样式支持说明.md` - Word 样式兼容性
- `移动端优化说明.md` - 移动端优化历史
- `页面类型修正说明.md` - 页面类型重构

## 🔄 更新历史

- **2025-01**：移动端深度优化，CSS 减少 43%
- **2025-01**：底部控制栏实现
- **2025-01**：页面类型修正
- **2025-01**：多样式支持
- **2024-12**：项目初始化
