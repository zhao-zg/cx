{% extends "base.html" %}

{% block title %}{{ training.title }}{% endblock %}

{% block content %}
<div class="index-page">
    <div class="toc-list">
        {% for chapter in training.chapters %}
        <a href="{{ chapter.number }}_cx.htm" class="toc-item" data-chapter="{{ chapter.number }}">
            <span class="toc-num">ç¬¬{{ chapter.number }}ç¯‡</span>
            <span class="toc-title">{{ chapter.title }}</span>
        </a>
        {% endfor %}
    </div>
    
    <div class="index-footer-nav">
        <a href="../" class="footer-nav-btn">
            <span class="nav-icon">ğŸ </span>
            <span class="nav-text">è¿”å›ä¸»é¡µ</span>
        </a>
    </div>
</div>

<style>
.index-page {
    padding: 0;
}

.toc-list {
    display: flex;
    flex-direction: column;
    gap: 1px;
    background: #e8ecf0;
    border-radius: 10px;
    overflow: hidden;
    margin-bottom: 20px;
}

.index-footer-nav {
    display: flex;
    justify-content: center;
    padding: 20px 0;
}

.footer-nav-btn {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    padding: 12px 24px;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: #fff;
    text-decoration: none;
    border-radius: 10px;
    font-size: 16px;
    font-weight: 600;
    box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
    transition: transform 0.2s, box-shadow 0.2s;
}

.footer-nav-btn:active {
    transform: translateY(1px);
    box-shadow: 0 2px 6px rgba(102, 126, 234, 0.3);
}

.nav-icon {
    font-size: 20px;
}

.nav-text {
    font-size: 15px;
}

.toc-item {
    display: flex;
    align-items: baseline;
    gap: 12px;
    padding: 14px 16px;
    background: #fff;
    text-decoration: none;
    color: inherit;
    transition: background 0.15s;
}

.toc-item:active {
    background: #f0f4ff;
}

.toc-num {
    flex-shrink: 0;
    font-size: 0.9375em;
    font-weight: 600;
    color: #667eea;
    white-space: nowrap;
}

.toc-title {
    flex: 1;
    font-size: 1em;
    line-height: 1.6;
    color: #2d3748;
    font-weight: 500;
}

/* æ¡Œé¢ç«¯ä¼˜åŒ– */
@media (min-width: 768px) {
    .toc-list {
        gap: 0;
        border-radius: 12px;
    }
    
    .toc-item {
        padding: 16px 20px;
        gap: 14px;
    }
    
    .toc-item:hover {
        background: #f0f4ff;
    }
    
    .toc-num {
        font-size: 1em;
    }
    
    .toc-title {
        font-size: 1.0625em;
    }
}


</style>

<script>
// æ ¹æ®æ˜ŸæœŸå‡ å†³å®šè·³è½¬ç›®æ ‡
document.addEventListener('DOMContentLoaded', function() {
    var dayOfWeek = new Date().getDay(); // 0=å‘¨æ—¥, 1=å‘¨ä¸€, ..., 6=å‘¨å…­
    var dayAnchors = ['', 'day1', 'day2', 'day3', 'day4', 'day5', 'day6']; // å‘¨ä¸€åˆ°å‘¨å…­
    
    var tocItems = document.querySelectorAll('.toc-item');
    tocItems.forEach(function(item) {
        var chapterNum = item.getAttribute('data-chapter');
        
        if (dayOfWeek === 0) {
            // å‘¨æ—¥ï¼šè·³è½¬åˆ°çº²ç›®é¡µ
            item.href = chapterNum + '_cv.htm';
        } else {
            // å‘¨ä¸€åˆ°å‘¨å…­ï¼šè·³è½¬åˆ°æ™¨å…´é¡µå¯¹åº”çš„å¤©
            item.href = chapterNum + '_cx.htm#' + dayAnchors[dayOfWeek];
        }
    });
});
</script>
{% endblock %}
