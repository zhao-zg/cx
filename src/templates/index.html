{% extends "base.html" %}

{% block title %}{{ training.title }}{% endblock %}

{% block head_css %}
<style>
/* 目录页关键CSS - 放head避免FOUC */
.back-home-wrapper{margin-bottom:20px;padding-bottom:16px;border-bottom:1px solid var(--border)}
.back-home{display:inline-flex;align-items:center;gap:6px;padding:8px 14px 8px 10px;color:var(--btn-secondary-text);text-decoration:none;font-size:15px;font-weight:500;border-radius:8px;background:var(--btn-secondary-bg);border:1px solid var(--btn-secondary-border);box-shadow:0 1px 3px rgba(102,126,234,0.08)}
.back-icon{width:18px;height:18px;flex-shrink:0}
.toc-list{display:flex;flex-direction:column;gap:1px;background:#e8ecf0;border-radius:10px;overflow:hidden;margin-bottom:20px}
.toc-item{display:flex;align-items:baseline;gap:12px;padding:14px 16px;background:#fff;text-decoration:none;color:inherit}
.toc-num{flex-shrink:0;font-size:1em;font-weight:600;color:var(--brand);white-space:nowrap}
.toc-title{flex:1;font-size:1.05em;line-height:1.6;color:#2d3748;font-weight:500}
</style>
{% endblock %}

{% block content %}
<div class="index-page">
    <div class="back-home-wrapper">
        <a href="../index.html" class="back-home" onclick="try{sessionStorage.setItem('cx_user_back','true')}catch(e){}">
            <svg class="back-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
                <path d="M19 12H5M12 19l-7-7 7-7"/>
            </svg>
            <span class="back-text">返回主页</span>
        </a>
    </div>
    
    <div class="toc-list">
        {% for chapter in training.chapters %}
        <a href="{{ chapter.number }}_cx.htm" class="toc-item" data-chapter="{{ chapter.number }}">
            <span class="toc-num">第{{ chapter.number }}篇</span>
            <span class="toc-title">{{ chapter.title }}</span>
        </a>
        {% endfor %}
    </div>
</div>

<style>
.index-page{padding:0}
.back-home:active{background:var(--btn-secondary-active-bg);border-color:var(--brand);transform:translateX(-2px);box-shadow:0 2px 6px rgba(102,126,234,0.15)}
.back-icon{transition:transform 0.2s ease}
.back-home:active .back-icon{transform:translateX(-2px)}
.back-text{line-height:1;letter-spacing:0.3px}
.toc-item:active{background:#f0f4ff}
@media(min-width:768px){.back-home-wrapper{margin-bottom:24px;padding-bottom:18px}.back-home{font-size:15px;padding:10px 16px 10px 12px}.back-home:hover{background:var(--btn-secondary-hover-bg);border-color:var(--brand);transform:translateX(-2px);box-shadow:0 2px 6px rgba(102,126,234,0.15)}.back-home:hover .back-icon{transform:translateX(-2px)}.back-icon{width:20px;height:20px}.toc-list{gap:0;border-radius:12px}.toc-item{padding:16px 20px;gap:14px}.toc-item:hover{background:#f0f4ff}.toc-num{font-size:1em}.toc-title{font-size:1.0625em}}
</style>

<script src="js/toc-redirect.js" defer></script>
{% endblock %}
