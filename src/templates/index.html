{% extends "base.html" %}

{% block title %}{{ training.title }}{% endblock %}

{% block content %}
<div class="index-page">
    <div class="toc-list">
        {% for chapter in training.chapters %}
        <a href="{{ chapter.number }}_cx.htm" class="toc-item" data-chapter="{{ chapter.number }}">
            <span class="toc-num">第{{ chapter.number }}篇</span>
            <span class="toc-title">{{ chapter.title }}</span>
        </a>
        {% endfor %}
    </div>
    

</div>

<style>
.index-page {
    padding: 0;
}

.toc-list {
    display: flex;
    flex-direction: column;
    gap: 1px;
    background: #e8ecf0;
    border-radius: 10px;
    overflow: hidden;
}

.toc-item {
    display: flex;
    align-items: baseline;
    gap: 12px;
    padding: 14px 16px;
    background: #fff;
    text-decoration: none;
    color: inherit;
    transition: background 0.15s;
}

.toc-item:active {
    background: #f0f4ff;
}

.toc-num {
    flex-shrink: 0;
    font-size: 15px;
    font-weight: 600;
    color: #667eea;
    white-space: nowrap;
}

.toc-title {
    flex: 1;
    font-size: 16px;
    line-height: 1.6;
    color: #2d3748;
    font-weight: 500;
}

/* 桌面端优化 */
@media (min-width: 768px) {
    .toc-list {
        gap: 0;
        border-radius: 12px;
    }
    
    .toc-item {
        padding: 16px 20px;
        gap: 14px;
    }
    
    .toc-item:hover {
        background: #f0f4ff;
    }
    
    .toc-num {
        font-size: 16px;
    }
    
    .toc-title {
        font-size: 17px;
    }
}


</style>

<script>
// 根据星期几决定跳转目标
document.addEventListener('DOMContentLoaded', function() {
    var dayOfWeek = new Date().getDay(); // 0=周日, 1=周一, ..., 6=周六
    var dayAnchors = ['', 'day1', 'day2', 'day3', 'day4', 'day5', 'day6']; // 周一到周六
    
    var tocItems = document.querySelectorAll('.toc-item');
    tocItems.forEach(function(item) {
        var chapterNum = item.getAttribute('data-chapter');
        
        if (dayOfWeek === 0) {
            // 周日：跳转到纲目页
            item.href = chapterNum + '_cv.htm';
        } else {
            // 周一到周六：跳转到晨兴页对应的天
            item.href = chapterNum + '_cx.htm#' + dayAnchors[dayOfWeek];
        }
    });
});
</script>
{% endblock %}
